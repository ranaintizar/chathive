(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{57:function(t,e,n){"use strict";n.r(e),n.d(e,"Modal",(function(){return b}));var s=n(1),o=n(82);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function l(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return _(this,n)}}function _(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(a,t);var e,n,s,i=f(a);function a(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t,e)).isOpened_=!1,n.blockCssClass_=n.config_.blockCssClass,n.visibleModifierCssClass_="".concat(n.blockCssClass_,"--visible"),n.closeModalCta_=null,n.lastFocusedElement_=null,n.focusElements_=[],n.firstTabIndex_=null,n.firstFocus_=null,n.lastFocus_=null,n.contentId_=null,n.openModal_=n.openModal_.bind(d(n)),n.registerFocusableElements_=n.registerFocusableElements_.bind(d(n)),n.keyDownHandler_=function(t){n.handleKeyDown_(t)},n}return e=a,(n=[{key:"openModal_",value:function(t,e){var n=e.type;this.contentId_=t,n===this.config_.type&&(this.lastFocusedElement_=document.activeElement,this.isOpened_=!0,this.element.classList.add(this.visibleModifierCssClass_),this.store_.dispatch(this.topics_.SHOW_MODAL_CONTENT,{id:t}))}},{key:"closeModal_",value:function(){this.lastFocusedElement_.focus(),this.removeTrapHandler_(),this.isOpened_=!1,this.element.classList.remove(this.visibleModifierCssClass_),this.store_.dispatch(this.topics_.CLOSE_MODAL,{id:this.contentId_})}},{key:"closeKeyHandler_",value:function(t){t.keyCode===o.a.ESC&&this.isOpened_&&this.closeModal_()}},{key:"registerFocusableElements_",value:function(t){this.focusElements_=c(t),this.tabIndexCreation_(),this.focusElements_.length>0&&(this.firstFocus_.focus(),this.element.addEventListener(p.KEYDOWN,this.keyDownHandler))}},{key:"tabIndexCreation_",value:function(){var t=this;this.firstTabIndex_=this.focusElements_[0],this.lastTabIndex_=document.createElement("div"),this.lastTabIndex_.tabIndex=0,this.element.insertAdjacentElement("beforeend",this.lastTabIndex_),this.focusElements_.length>1?this.firstFocus_=this.focusElements_[1]:this.firstFocus_=this.closeModalCta_,this.lastFocus_=this.closeModalCta_,this.firstTabIndex_.addEventListener("focus",(function(){return t.lastFocus_.focus()})),this.lastTabIndex_.addEventListener("focus",(function(){return t.firstFocus_.focus()}))}},{key:"handleKeyDown_",value:function(t){t.keyCode===o.a.TAB&&(t.shiftKey&&document.activeElement===this.firstFocus_?(t.preventDefault(),this.lastFocus_.focus()):t.shiftKey||document.activeElement!==this.lastFocus_||(t.preventDefault(),this.firstFocus_.focus()))}},{key:"removeTrapHandler_",value:function(){this.lastTabIndex_&&this.element.removeChild(this.lastTabIndex_),this.lastTabIndex_=null,this.element.removeEventListener(p.KEYDOWN,this.keyDownHandler_)}},{key:"subscribeEvents_",value:function(){this.subscriptions_=[[this.topics_.SHOW_MODAL,this.openModal_],[this.topics_.REGISTER_FOCUSABLE_MODAL_ELEMENTS,this.registerFocusableElements_]]}},{key:"initialize_",value:function(){var t;this.closeModalCta_=this.element.querySelector(y.CLOSE_CTA),this.events=(r(t={},"".concat(p.CLICK," ").concat(y.CLOSE_CTA),this.closeModal_),r(t,"".concat(p.CLICK," ").concat(y.MODAL_BACKDROP),this.closeModal_),t),document.addEventListener(p.KEYDOWN,this.closeKeyHandler_.bind(this),!1),this.subscribeEvents_()}}])&&l(e.prototype,n),s&&l(e,s),a}(s.BaseComponent),p={CLICK:"click",KEYDOWN:"keydown"},y={CLOSE_CTA:".js-cta-close",MODAL_BACKDROP:".modal__backdrop"}},81:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var s={DOWN:40,END:35,ENTER:13,ESC:27,HOME:36,LEFT:37,RIGHT:39,SPACE:32,TAB:9,UP:38}},82:function(t,e,n){"use strict";var s=n(81);n.d(e,"a",(function(){return s.a}))}}]);