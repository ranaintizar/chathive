(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{111:function(t,e,s){"use strict";s.r(e),s.d(e,"SubnavDefault",(function(){return f}));var n=s(8),i=s(0),o=s(1),r=s(3);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function c(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function _(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,n=C(t);if(e){var i=C(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return b(this,s)}}function b(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(u,t);var e,s,o,a=v(u);function u(t,e){var s,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this,t,e)).blockCssClass_=n.config_.blockCssClass,n.isPersistent_=n.config_.isPersistent,n.subnavButtonCssClass_="".concat(n.blockCssClass_,"__button-toggle"),n.subnavTitleCssClass_="".concat(n.blockCssClass_,"__current-section"),n.subnavItemCssClass_="".concat(n.blockCssClass_,"__item"),n.subnavGroupItemCssClass_="".concat(n.blockCssClass_,"__group-item"),n.visibleSubnavCssClass_="".concat(n.blockCssClass_,"--visible"),n.subnavGroupVisibleCssClass_="".concat(n.subnavGroupItemCssClass_,"--visible"),n.subnavScrollPositionCssClass_="".concat(n.blockCssClass_,"--scroll-position"),n.openSubnavButtonCssClass_="".concat(n.blockCssClass_,"--open"),n.subnavItemActiveCssClass_="".concat(n.subnavItemCssClass_,"--active"),n.subnavStopAnimationCssClass_="".concat(n.blockCssClass_,"--no-animation"),n.backButtonCssClass_="".concat(n.blockCssClass_,"--back"),n.observerDefaults_={rootMargin:"-29.5% 0px -70% 0px"},n.adapter_=null,n.firstElementToSpy_=null,n.lastElementToSpy_=null,n.backElement_=null,n.observer_=null,n.currentSpyId_="",n.initialWidth_=n.global_.innerWidth,n.handleSubnavPosition_=n.handleSubnavPosition_.bind(p(n)),n.setSubnavItemsBehavior_=n.setSubnavItemsBehavior_.bind(p(n)),n.stopCssAnimations_=n.stopCssAnimations_.bind(p(n)),n.activateCssAnimations_=n.activateCssAnimations_.bind(p(n)),n.showPersistentSubnav_=n.showPersistentSubnav_.bind(p(n)),n.events=(c(s={},"click .".concat(n.subnavButtonCssClass_),n.toogleSubnav_),c(s,"click .".concat(n.backButtonCssClass_),n.hideSubnav_),s),n}return e=u,(s=[{key:"initialize_",value:function(){this.subscriptions_=[[this.topics_.NAV_SCROLL_CHANGE,this.handleSubnavPosition_],[this.topics_.WINDOW_RESIZE_STARTED,this.stopCssAnimations_],[this.topics_.WINDOW_RESIZE_ENDED,this.activateCssAnimations_]],this.render_(),this.element.classList.remove(this.subnavStopAnimationCssClass_)}},{key:"render_",value:function(){this.backElement_=this.element.querySelector(".".concat(this.backButtonCssClass_)),this.titleElement_=this.element.querySelector(".".concat(this.subnavTitleCssClass_)),this.isPersistent_?this.setPersistentBehavior_():(this.trackComponentToSpy_(),this.adapter_=this.setAdapter_()),this.setAnchorsBehavior_(),this.setGroupItemsBehavior_()}},{key:"setPersistentBehavior_",value:function(){var t=this;this.store_.subscribe([[this.topics_.SCROLL_POSITION_CHANGE,this.showPersistentSubnav_]]),l(this.element.querySelectorAll("a")).forEach((function(e){var s=window.location.pathname;e.getAttribute("href")===s&&(t.titleElement_.textContent=e.textContent.trim(),e.parentElement.classList.add(t.subnavItemActiveCssClass_))}))}},{key:"setAdapter_",value:function(){var t=this;return this.elementsToSpy_=l(this.global_.document.querySelectorAll("[data-spy-ref]")),this.elementsToSpy_.reduce((function(e,s,n,i){var o=t.getElementToSpy_(s),r=o.elementToSpy,a=o.id;return 0===n?t.firstElementToSpy_=r:n===i.length-1&&(t.lastElementToSpy_=r),t.observer_.observe(r),e[a]=s,e}),{})}},{key:"getElementToSpy_",value:function(t){var e=t.dataset.spyRef,s=this.global_.document.querySelector("#".concat(e));if(!s)throw new r.k(e);return"ARTICLE"===s.parentElement.tagName&&t.hasAttribute("data-spy-parent")&&(e="".concat(e,"-article"),t.firstElementChild.setAttribute("href","#".concat(e)),(s=s.parentElement).id=e),{elementToSpy:s,id:e}}},{key:"trackComponentToSpy_",value:function(){var t=this;this.observer_=new IntersectionObserver((function(e,s){e.forEach((function(e){t.setSubnavItemsBehavior_(e)}))}),this.observerDefaults_)}},{key:"setSubnavItemsBehavior_",value:function(t){if(t.isIntersecting){if(this.element.classList.add(this.visibleSubnavCssClass_),this.currentSpyId_===t.target.id)return;this.currentSpyId_=t.target.id,this.element.classList.remove(this.openSubnavButtonCssClass_),this.currentGroup_&&this.currentGroup_.classList.remove(this.subnavGroupVisibleCssClass_),this.lastActiveItem_&&this.lastActiveItem_.classList.remove(this.subnavItemActiveCssClass_),this.lastActiveItem_=this.adapter_[this.currentSpyId_],this.lastActiveItem_.classList.add(this.subnavItemActiveCssClass_),this.titleElement_&&(this.titleElement_.textContent=this.adapter_[this.currentSpyId_].textContent.trim())}this.checkSpyPath_(t)}},{key:"handleSubnavPosition_",value:function(){this.element.classList.add(this.subnavScrollPositionCssClass_),this.store_.state.isHeaderVisible&&this.element.classList.remove(this.subnavScrollPositionCssClass_)}},{key:"checkSpyPath_",value:function(t){!t.isIntersecting&&this.isThroughSpyPath_()&&(this.element.classList.remove(this.openSubnavButtonCssClass_),this.element.classList.remove(this.visibleSubnavCssClass_),this.currentGroup_&&this.currentGroup_.classList.remove(this.subnavGroupVisibleCssClass_))}},{key:"isThroughSpyPath_",value:function(){var t=this.store_.state.currentScrollPosition,e=.29*this.global_.innerHeight;return t<this.firstElementToSpy_.offsetTop-e||t>this.lastElementToSpy_.offsetTop}},{key:"showPersistentSubnav_",value:function(){this.element.classList.add(this.visibleSubnavCssClass_),this.element.classList.remove(this.openSubnavButtonCssClass_)}},{key:"toogleSubnav_",value:function(){this.element.classList.toggle(this.openSubnavButtonCssClass_);var t={isMenuState:!0,isSubMenuOpen:this.element.classList.contains(this.openSubnavButtonCssClass_)};this.setGAEvents_(t,this.isPersistent_?this.titleElement_.innerText:this.lastActiveItem_.innerText)}},{key:"stopCssAnimations_",value:function(){this.initialWidth_!==this.global_.innerWidth&&(this.element.classList.add(this.subnavStopAnimationCssClass_),this.element.classList.remove(this.openSubnavButtonCssClass_))}},{key:"activateCssAnimations_",value:function(){this.initialWidth_!==this.global_.innerWidth&&(this.element.classList.remove(this.subnavStopAnimationCssClass_),this.initialWidth_=this.global_.innerWidth)}},{key:"hideSubnav_",value:function(){this.element.classList.remove(this.visibleSubnavCssClass_),this.element.classList.remove(this.openSubnavButtonCssClass_),this.setGAEvents_({},this.backElement_.innerText,this.backElement_.getAttribute("href"))}},{key:"setAnchorsBehavior_",value:function(){var t=this;l(this.element.querySelectorAll("a")).forEach((function(e){e.addEventListener("click",(function(){t.element.classList.remove(t.openSubnavButtonCssClass_),t.currentGroup_&&t.currentGroup_.classList.remove(t.subnavGroupVisibleCssClass_),t.setGAEvents_({},e.innerText,e.getAttribute("href"))}))}))}},{key:"setGroupItemsBehavior_",value:function(){var t=this;l(this.global_.document.querySelectorAll(".".concat(this.subnavGroupItemCssClass_))).forEach((function(e){e.firstElementChild.addEventListener("click",(function(s){t.currentGroup_=e,t.currentGroup_.classList.toggle(t.subnavGroupVisibleCssClass_),t.setGAEvents_({isMenuState:!0,isSubMenuOpen:t.currentGroup_.classList.contains(t.subnavGroupVisibleCssClass_)},t.currentGroup_.firstElementChild.innerText)})),e.addEventListener("blur",(function(e){e.currentTarget.contains(e.relatedTarget)||(t.currentGroup_.classList.remove(t.subnavGroupVisibleCssClass_),t.setGAEvents_({isMenuState:!0,isSubMenuOpen:!1},t.currentGroup_.firstElementChild.innerText))}))}))}},{key:"setGAEvents_",value:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=t.isMenuState,r=t.isSubMenuOpen;this.store_.dispatch(i.a.GA_TRACK_EVENT,{data:{menuState:o||!1,isSubMenuOpen:r||!1,label:e,url:s},id:n.a.SUB_NAV_SPY})}}])&&_(e.prototype,s),o&&_(e,o),u}(o.BaseComponent)}}]);